/* 1. Importamos las fuentes de Google: Syne (Impacto Artístico) + Inter (Legibilidad) + JetBrains Mono (Código) */
@import url("https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap");
@import "tailwindcss";

/* === CONFIGURACIÓN DE TEMA TAILWIND v4 === */
@theme {
  /* Tipografías */
  --font-sans: "Inter", system-ui, sans-serif;
  --font-heading: "Syne", sans-serif;
  --font-mono: "JetBrains Mono", monospace;

  /* Colores mapeados */
  --color-primary: var(--primary-color);
  --color-surface: var(--surface);
  --color-bg-base: var(--bg-color);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);

  /* Animaciones */
  --animate-indicator-in: indicatorIn 260ms cubic-bezier(0.2, 0.9, 0.2, 1);
  --animate-cv-pulse: cvPulse 6.2s infinite ease-in-out;

  @keyframes indicatorIn {
    from {
      opacity: 0;
      transform: scaleY(0.6);
    }
    to {
      opacity: 1;
      transform: scaleY(1);
    }
  }

  @keyframes cvPulse {
    0% {
      box-shadow: 0 8px 18px rgba(99, 83, 242, 0.08);
      transform: translateY(0);
    }
    50% {
      box-shadow: 0 16px 36px rgba(99, 83, 242, 0.14);
      transform: translateY(-2px);
    }
    100% {
      box-shadow: 0 8px 18px rgba(99, 83, 242, 0.08);
      transform: translateY(0);
    }
  }

  @keyframes expandCircle {
    0% {
      transform: scale(0);
      border-radius: 100%;
    }
    100% {
      transform: scale(50);
      border-radius: 50%;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInBottom {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@keyframes marquee {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-33.33%);
  }
}

.animate-marquee {
  animation: marquee 15s linear infinite;
}

.group:hover .animate-marquee {
  animation-play-state: paused;
}

/* === SOPORTE ACCESIBILIDAD: Respeto a prefers-reduced-motion (WCAG 2.3.3) === */
@media (prefers-reduced-motion: reduce) {
  /* Desactivar todas las animaciones y transiciones */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Mantener transformaciones instantáneas pero sin animación */
  .animate-marquee {
    animation: none !important;
  }
}

/* === VARIABLES CSS (Light/Dark Mode) === */
:root {
  /* CLAVE PARA MOBILE: Le avisa al navegador que use controles oscuros */
  color-scheme: dark;

  /* Paleta Dark (Default) */
  --primary-color: #6353f2;
  --bg-color: #0a0a0a;
  --bg-1: #0b0b0b;
  --bg-2: #1f1d22;
  --surface: linear-gradient(180deg, var(--bg-1), var(--bg-2));

  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.5);
  --border-color: rgba(83, 91, 242, 0.3);

  --gradient: linear-gradient(135deg, #535bf2 0%, #7c3aed 100%);

  /* Espaciados */
  --pad: max(20px, 4vmin);
  --pad-sm: max(10px, 2vmin);
  --pad-lg: max(40px, 8vmin);

  /* Tamaños Sidebar */
  --sidebar-collapsed: 72px;
  --sidebar-expanded: 240px;
  --sidebar-mobile-height: 88px;
}

/* Paleta Light (OFF-WHITE PREMIUM) */
/* Agregamos .light para asegurar compatibilidad si data-theme falla */
:root[data-theme="light"],
:root.light {
  /* Fuerza al navegador a renderizar controles en modo claro */
  color-scheme: light;

  /* Violeta un poco más profundo para mejor contraste en fondos claros */
  --primary-color: #5b4dff;

  /* Fondo principal: "Soft Platinum" (Gris muy suave, no blanco puro) */
  /* Esto evita que te queme los ojos y se ve más elegante */
  --bg-color: #f3f4f6; /* Slate 100 aprox */

  /* Fondos secundarios: Blanco puro para las tarjetas/sidebar */
  /* Al ser blanco sobre gris suave, genera relieve natural */
  --bg-1: #ffffff;
  --bg-2: #f8fafc;

  /* Textos oscuros de alto contraste (Slate/Cool Gray) */
  --text-primary: #0f172a; /* Slate 900 - Casi negro */
  --text-secondary: #475569; /* Slate 600 - Gris medio solido */
  --text-muted: #64748b; /* Slate 500 - Mejorado para WCAG AA (4.5:1 contrast) */

  /* Surface: Gradiente muy sutil de blanco a gris pálido para el sidebar */
  --surface: linear-gradient(180deg, #ffffff, #f1f5f9);

  --gradient: linear-gradient(135deg, #5b4dff 0%, #7c3aed 100%);
}

/* === ESTILOS BASE & SCROLLBARS === */
@layer base {
  html {
    @apply h-full;
    /* FIX MOBILE: Pinta el fondo del html para evitar bordes grises al scrollear */
    background-color: var(--bg-color);
    transition: background-color 0.5s ease;
  }

  body {
    @apply w-full h-full min-h-full relative overflow-x-hidden font-sans text-base leading-relaxed antialiased;
    color: var(--text-primary);
    background-color: var(--bg-color);
    /* Transición suave al cambiar de tema */
    transition:
      background-color 0.5s ease,
      color 0.5s ease;

    /* Fondo complejo */
    background:
      radial-gradient(1200px 600px at 10% 10%, rgba(99, 83, 242, 0.04), transparent), var(--surface);
  }

  /* Noise Overlay - Opacidad reducida en light mode via mix-blend */
  body::after {
    content: "";
    @apply fixed inset-0 pointer-events-none opacity-[0.03] -z-10 mix-blend-overlay;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='f'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='1' stitchTiles='stitch'/></filter><rect width='100%25' height='100%25' filter='url(%23f)' opacity='0.8'/></svg>");
  }

  h1,
  h2,
  h3 {
    font-family: var(--font-heading); /* 'Syne', sans-serif */
    @apply font-bold tracking-tight; /* Syne pide peso bold para lucirse */
  }

  /* Custom Scrollbars unificados */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  @media (max-width: 880px) {
    ::-webkit-scrollbar {
      width: 4px;
      height: 4px;
    }
  }

  ::-webkit-scrollbar-track {
    /* Track más sutil en light mode automáticamente por opacidad */
    background: rgba(125, 125, 125, 0.05);
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb {
    /* Thumb adaptativo */
    background: color-mix(in srgb, var(--primary-color), transparent 60%);
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  @media (max-width: 880px) {
    ::-webkit-scrollbar-thumb {
      border: 1px solid transparent;
    }
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--primary-color);
  }
}

/* === LAYOUT SHIFT === */
#root {
  @apply w-full h-full flex flex-col items-start;
}

.page,
.page-content {
  @apply flex flex-col items-start w-full h-full;
  transition:
    margin-left 320ms cubic-bezier(0.2, 0.9, 0.2, 1),
    padding 200ms;
}

/* Contenedor con scroll snap */
.main-content.scroll-container {
  @apply h-screen overflow-y-auto overflow-x-hidden;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  margin-left: var(--sidebar-collapsed);
  width: calc(100% - var(--sidebar-collapsed));
  transition: margin-left 320ms cubic-bezier(0.2, 0.9, 0.2, 1);
}

/* Detección de Sidebar expandido para mover contenido */
body:has([aria-expanded="true"]) .main-content.scroll-container {
  margin-left: var(--sidebar-expanded);
  width: calc(100% - var(--sidebar-expanded));
}

/* Mobile Layout Shift Override */
@media (max-width: 880px) {
  .page,
  .page-content,
  .main-content {
    margin-left: 0 !important;
    width: 100% !important;
    padding-bottom: calc(var(--sidebar-mobile-height) + 1.5rem);
  }

  .main-content.scroll-container {
    margin-left: 0 !important;
    width: 100% !important;
    /* height: calc(100vh - var(--sidebar-mobile-height)); */
  }

  /* Smooth touch scrolling */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Better tap highlight */
  a,
  button {
    -webkit-tap-highlight-color: transparent;
  }

  /* Asegurar que el contenido no quede detrás del navbar inferior */
  section {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* Evitar bounce scroll en iOS */
  body {
    overscroll-behavior-y: none;
  }
}

/* === SHIMMER / BRILLO REUTILIZABLE PARA BOTONES VIOLETA === */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* Clase reutilizable para botones con brillo en hover.
   Uso: añadir `btn-shiny` al botón (normalmente botones con degradado violeta). */
.btn-shiny {
  position: relative;
  overflow: hidden;
}

.btn-shiny::before {
  content: "";
  position: absolute;
  z-index: 15;
  inset: 0;
  width: 200%;
  background: repeating-linear-gradient(
    90deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.08) 45%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.08) 55%,
    transparent 60%,
    transparent 100%
  );
  transform: translateX(-100%);
  pointer-events: none;
  mix-blend-mode: screen;
}

.btn-shiny:hover::before,
.group:hover .btn-shiny::before {
  animation: shimmer 3000ms linear infinite;
}

.btn-shiny .btn-shimmer-hide-on-hover {
  position: relative;
  z-index: 20;
}

/* === UTILITIES CSS PERSONALIZADAS === */
/* ✅ Gradientes reutilizables para consistencia */
.gradient-primary {
  background-image: linear-gradient(to right, var(--primary-color), #a855f7);
}

.gradient-primary-br {
  background-image: linear-gradient(to bottom right, var(--primary-color), #a855f7);
}

.gradient-text {
  background-image: linear-gradient(to right, var(--primary-color), #c084fc);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

/* ✅ Variables CSS para colores de iconos de tecnologías */
.tech-react {
  color: var(--color-react, #61dafb);
}

.tech-typescript {
  color: var(--color-typescript, #3178c6);
}

.tech-tailwind {
  color: var(--color-tailwind, #38bdf8);
}

.tech-nodejs {
  color: var(--color-nodejs, #8cc84b);
}

.tech-postgresql {
  color: var(--color-postgresql, #336791);
}

.tech-mongodb {
  color: var(--color-mongodb, #47a248);
}

.tech-docker {
  color: var(--color-docker, #2496ed);
}

/* ✅ Focus rings consistentes para accesibilidad */
.focus-ring-primary:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--primary-color),
    0 0 0 4px var(--bg-color);
}

/* ✅ Cards interactivas reutilizables */
.card-hover {
  transition: all 0.3s ease-out;
}

.card-hover:hover {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  transform: translateY(-4px);
}

.card-hover:active {
  transform: scale(0.98);
}

.card-base {
  border-radius: 1rem;
  background-color: rgba(var(--text-primary-rgb, 167, 169, 190), 0.05);
  border: 1px solid rgba(var(--text-primary-rgb, 167, 169, 190), 0.1);
}

/* ✅ Botones reutilizables */
.btn-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.75rem;
  padding: 0.625rem;
  transition: all 0.3s ease;
}

.btn-primary {
  background-image: linear-gradient(to right, var(--primary-color), #a855f7);
  color: white;
  font-weight: bold;
  padding: 0.75rem 1.5rem;
  border-radius: 0.75rem;
  box-shadow: 0 10px 15px -3px rgba(99, 83, 242, 0.3);
  transition: all 0.3s ease;
}

.btn-primary:hover {
  opacity: 0.9;
  transform: scale(1.05);
}

/* === VARIABLES CSS PARA COLORES DE TECNOLOGÍAS Y REDES === */
:root {
  /* Tech Stack - Core */
  --color-react: #61dafb;
  --color-typescript: #3178c6;
  --color-tailwind: #38bdf8;
  --color-nodejs: #8cc84b;
  --color-postgresql: #336791;
  --color-mongodb: #47a248;
  --color-docker: #2496ed;

  /* Tech Stack - Frontend */
  --color-html5: #e34f26;
  --color-css3: #1572b6;
  --color-javascript: #f7df1e;
  --color-figma: #f24e1e;
  --color-canva: #00c4cc;

  /* Tech Stack - Backend */
  --color-express: #888888;
  --color-python: #3776ab;
  --color-sqlite: #0f80cc;
  --color-json: #f7df1e;
  --color-solidity: #363636;

  /* Tech Stack - Tools */
  --color-git: #f05032;
  --color-github: #6e5494;
  --color-vscode: #007acc;
  --color-postman: #ff6c37;
  --color-netlify: #00c7b7;

  /* Social Networks */
  --color-linkedin: #0a66c2;

  /* UI Feedback */
  --color-success: #10b981;
  --color-error: #ef4444;
  --color-warning: #f59e0b;

  /* Colors on Brand Surfaces */
  --color-on-primary: #ffffff;
}

/* Opcional: Ajustar en light mode si es necesario */
:root[data-theme="light"],
:root.light {
  /* Los colores de tech se mantienen igual en ambos temas */
  /* pero puedes ajustarlos aquí si necesitas más contraste */
}

/* === OPTIMIZACIÓN DE PERFORMANCE CON WILL-CHANGE === */
/* Informa al navegador qué propiedades van a animarse para optimizar el renderizado */

/* Para elementos que se animan al hacer hover (cards, botones) */
.hover-lift {
  will-change: transform, box-shadow;
}

.hover-lift:hover {
  will-change: auto; /* Liberar recursos después del hover */
}

/* Para elementos con animaciones continuas (marquee, spinners) */
.animate-marquee,
.animate-spin,
.animate-pulse,
.animate-ping {
  will-change: transform, opacity;
}

/* Para modales y overlays que aparecen/desaparecen */
[role="dialog"],
.modal-overlay {
  will-change: opacity, transform;
}

/* Aplicar automáticamente a elementos con transiciones de transform */
[class*="hover:-translate"],
[class*="hover:scale"],
[class*="hover:rotate"],
[class*="group-hover:translate"],
[class*="group-hover:scale"] {
  will-change: transform;
}

/* Remover will-change cuando no está activo (mejor práctica) */
@media (hover: none) {
  .hover-lift,
  [class*="hover:-translate"],
  [class*="hover:scale"],
  [class*="hover:rotate"] {
    will-change: auto;
  }
}

/* === ESTILOS PARA MODAL DE PROYECTOS === */
/* Botones de navegación del carousel - hover con color dinámico */
.carousel-arrow:hover {
  background-color: var(--primary-color);
  color: var(--color-on-primary);
  border-color: var(--primary-color);
}

/* === ANIMACIÓN DE TRANSICIÓN DE TEMA === */
/* View Transitions API para cambio de tema suave con expansión circular */

/* CRÍTICO: Configurar el elemento raíz para View Transitions */
:root {
  view-transition-name: root;
}

/* Configuración base para las transiciones */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* El contenido antiguo (tema actual) se desvanece */
::view-transition-old(root) {
  z-index: 1;
}

/* El contenido nuevo (nuevo tema) aparece encima con clip-path circular */
::view-transition-new(root) {
  z-index: 999;
}

/* Prevenir parpadeos durante la transición */
::view-transition-group(root) {
  animation-duration: 0.6s;
  animation-timing-function: cubic-bezier(0.25, 1, 0.5, 1);
}

/* Fallback mejorado para navegadores sin View Transitions API */
/* Esta animación se verá muy bien en Brave y otros navegadores */
.theme-transitioning {
  position: relative;
}

.theme-transitioning::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  background: var(--bg-color);
  animation: theme-fade-overlay 400ms cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

@keyframes theme-fade-overlay {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.7;
  }
  100% {
    opacity: 0;
  }
}

.theme-transitioning *,
.theme-transitioning *::before,
.theme-transitioning *::after {
  transition:
    color 400ms cubic-bezier(0.25, 1, 0.5, 1) !important,
    background-color 400ms cubic-bezier(0.25, 1, 0.5, 1) !important,
    border-color 400ms cubic-bezier(0.25, 1, 0.5, 1) !important,
    fill 400ms cubic-bezier(0.25, 1, 0.5, 1) !important,
    stroke 400ms cubic-bezier(0.25, 1, 0.5, 1) !important;
}

/* Deshabilitar animación de tema si el usuario prefiere movimiento reducido */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-group(root),
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none !important;
  }

  .theme-transitioning,
  .theme-transitioning * {
    transition: none !important;
  }
}

/* === SKELETON LOADERS === */
/* Animación de shimmer para estados de carga */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  animation: skeleton-shimmer 2s ease-in-out infinite;
}

/* Respetar prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .skeleton-shimmer {
    animation: none;
  }
}
